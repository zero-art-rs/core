# BlueSky: Огляд соціальної мережі

ATProtocol (або Authenticated Transfer Protocol) - це децентралізований протокол для роботи соціальних веб-додатків з великим навантаженням. Його основною реалізацією є соціальна мережа Bluesky, яка функціонує на основі цього протоколу. Окрім Bluesky, існують неофіційні [клієнти](https://docs.bsky.app/showcase?tags=client), наприклад Deck.blue, Graysky, Klearsky, SkyFeed та інші. 

## Дані користувача

Кожний користувач у мережі ATProtocol має постійний ідентифікатор DID (Decentralized Identifier), що відповідає [стандарту W3C](https://www.w3.org/TR/did-core/), та зручне доменне ім'я, яке можна змінювати. Кожний DID повʼязаний з певним DID-документом, який містить інформацію про користувача: доменне ім'я, ключ підпису, URL посилання на сервер хост (PDS) користувача, тощо.

Дані користувачів зберігаються в публічних, само підписаних сховищах даних (репозиторіях), що автентифікуються за допомогою DID. Ці сховища являють собою колекції записів, які включають пости, коментарі, вподобання, підписки, тощо. Вони реалізовані у вигляді [Merkle Search Tree (MST)](https://hal.inria.fr/hal-02303490/document). Кожна зміна в репозиторії створює новий коміт, зафіксований як CID (Content Identifier). Репозиторії зберігаються в форматі [DAG-CBOR](https://ipld.io/docs/codecs/known/dag-cbor/), як граф об’єктів, що посилаються один на одного за CID. Очікується, що індивідуальні репозиторії можуть містити десятки міліонів записів. Метою ATProtocol є забезпечення можливості перенесення користувачем свого облікового запису з одного сервера PDS (Personal Data Server) на інший, наприклад, у випадку відмови. Очікується, що ідентичності будуть безпечними, надійними і незалежними від хост сервера користувача (PDS). Резервна копія даних користувача може зберігатися як [CAR](https://ipld.io/specs/transport/car/carv1/) файл локально або може бути віддзеркаленою стороннім сервісом. У випадку, якщо PDS зникне без попередження, користувач повинен мати можливість перейти до нового провайдера, оновивши свій DID-документ і завантаживши резервну копію своїх даних.

## Архітектура

ATProtocol має федеративну мережеву архітектуру. Дані облікових записів зберігаються на головних серверах (PDS). Дані сховища синхронізуються між серверами за допомогою стандартних веб-технологій (HTTP і WebSockets). Для синхронізації використовуються зміни (коміти).

Основні сервіси в мережі:

- Personal Data Servers (PDS) - зберігають дані користувача, поширюють їх, керують ідентифікацією та організовують запити до інших сервісів. Один такий сервер оперує багатьма користувачами.
- Relay - сканує мережу, збираючи якомога більше даних, і виводить їх в один великий потік для використання іншими сервісами.
- App Views - отримуючи потік даних від  relay, надає агрегацію даних з усієї мережі. Вони збирають метрики (лайки, репости, підписки), надають інструментарій для пошуку контенту та пошуку користувачів.

Існують також допоміжні сервіси:

- Feed generators (генератори стрічки) - це зовнішній сервіс, який створює та надає стрічку постів на основі заданих налаштувань.
- labelers (маркувальники) - це сервіс, що аналізує контент та надає йому певний лейбл (тег). Користувачі, можуть підписатися на певний маркувальник та заховати пости, які вони не хочуть бачити, наприклад спам, AI контент, і так далі.
- тощо

Сторонні розробники можуть створювати власні стрічки, пошукові сервіси, маркувальники та інше.

## Висновки

Bluesky на основі ATProtocol пропонує нову модель соціальної мережі, де ідентичність та дані належать користувачеві, а не централізованій платформі. Користувачі можуть самостійно керувати своєю стрічкою, фільтрами й модерацією, обираючи довірені сервіси або створюючи власні. Це відкриває шлях до більш зручних, ефективних та стійких соціальних мереж, де контроль повертається до спільнот, а не корпорацій. При цьому BlueSky, має наступні недоліки:

- Акаунти прив’язані до пошти.
- Пости є публічними
- Переписки між користувачами (DM) є обмеженими (лише повідомлення) і не є захищеними. Модерація Bluesky може відкрити ці повідомлення. DM в процесі розробки, тому можливо в майбутньому зявиться децентралізоване E2EE на основі ATProtocol.
- Екосистема ще у стані бета і не має масового користувача.

